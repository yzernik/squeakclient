version: '2'
services:

    lnd_alice:
      extends: lnd
      container_name: lnd_alice
      links:
          - "btcd:blockchain"

    lnd_bob:
      extends: lnd
      container_name: lnd_bob
      links:
          - "btcd:blockchain"

    lnd_carol:
      extends: lnd
      container_name: lnd_carol
      links:
          - "btcd:blockchain"

    sqk_alice:
      extends: sqk
      container_name: sqk_alice
      links:
          - "btcd:blockchain"
          - "lnd_alice:lnd"

    sqk_bob:
      extends: sqk
      container_name: sqk_bob
      links:
          - "btcd:blockchain"
          - "lnd_bob:lnd"

    sqk_carol:
      extends: sqk
      container_name: sqk_carol
      links:
          - "btcd:blockchain"
          - "lnd_carol:lnd"

    test:
      image: test
      build:
        context: ../
        dockerfile: docker/test/Dockerfile
      links:
        - "lnd_alice:lnd_alice"
        - "lnd_bob:lnd_bob"
        - "lnd_carol:lnd_carol"
        - "sqk_alice:sqk_alice"
        - "sqk_bob:sqk_bob"
        - "sqk_carol:sqk_carol"
      entrypoint: ["./test.sh"]
