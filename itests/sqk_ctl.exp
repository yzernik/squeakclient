#!/usr/bin/expect
# usage: ./sqk_ctl.exp host cmd

set HOST [lindex $argv 0]
set CMD [lindex $argv 1]

set ::env(RPCHOST) $HOST

set PROMPT "squeaknode-cli> "

log_user 0
# exp_internal 1
spawn ./start-sqkctl.sh
expect -re $PROMPT
send "$CMD\r"
expect {
  -re "$CMD\r\n(.*)\r\n" {
    set output $expect_out(1,string)
  }
}
send_user "$output\n"
